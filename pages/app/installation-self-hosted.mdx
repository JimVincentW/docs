---
title: 'Installation & Architecture'
description: 'Self-hosting guide and platform architecture'
---

# Installation & Architecture

This guide covers self-hosting Open Politics HQ and the underlying architecture.

## Quick Start

<Steps>
  <Step title="Prerequisites">
    - Docker and Docker Compose
    - 32GB RAM recommended
    - 20GB free disk space
    - Git
  </Step>
  
  <Step title="Clone & Configure">
    ```bash
    git clone https://github.com/open-politics/open-politics-hq.git
    cd open-politics-hq
    cp .env.example .env
    # Edit .env with your configuration
    ```
  </Step>
  
  <Step title="Start Services">
    ```bash
    docker compose up
    ```
  </Step>
  
  <Step title="Access">
    Open http://localhost:3000
  </Step>
</Steps>

<Warning>
**Change defaults immediately:**
- `FIRST_SUPERUSER=app_user`
- `FIRST_SUPERUSER_PASSWORD=app_user_password`
</Warning>

---

## Architecture

HQ is built from independent services that work together. Run them all locally, or mix local and managed services.

### Core Components

| Component | What It Does | Technology |
|-----------|-------------|------------|
| **Backend** | API, analysis jobs, MCP server | FastAPI + Python |
| **Frontend** | Web interface | Next.js + React |
| **Worker** | Background processing for large jobs | Celery |
| **Database** | Data storage with vector search | PostgreSQL + PGVector |
| **Object Storage** | File storage for uploads | MinIO (S3-compatible) |
| **Cache/Queue** | Session management, job queues | Redis |
| **Geocoding** | Location extraction and mapping | Pelias |
| **LLM** (optional) | Local AI inference | Ollama |

### Service Dependencies

```
Frontend (Next.js) ──► Backend (FastAPI) ──► Database (PostgreSQL)
                              │                    │
                              ▼                    ▼
                         Worker (Celery)    Vector Search (PGVector)
                              │
                              ▼
                      Object Storage (MinIO)
```

---

## Deployment Options

<CardGroup cols={3}>
  <Card title="Fully Local" icon="shield">
    Everything on your hardware. For air-gapped environments or complete data control.
  </Card>
  <Card title="Hybrid" icon="cloud">
    App locally, managed services (AWS RDS, Upstash Redis, S3) for less operational overhead.
  </Card>
  <Card title="Kubernetes" icon="server">
    Helm chart available for production deployments.
  </Card>
</CardGroup>

### Kubernetes Deployment

We provide a Helm chart for Kubernetes deployments:

```bash
# Clone the repo
git clone https://github.com/open-politics/open-politics-hq.git

# Navigate to Helm chart
cd open-politics-hq/.deployments/kubernetes/open-politics-hq-deployment

# Install with Helm
helm install open-politics-hq . -f values.yaml
```

---

## Configuration

### Environment Variables

Key variables in `.env`:

| Variable | Description | Default |
|----------|-------------|---------|
| `PORT` | Web server port | `3000` |
| `FIRST_SUPERUSER` | Admin username | `app_user` |
| `FIRST_SUPERUSER_PASSWORD` | Admin password | `app_user_password` |
| `DATABASE_URL` | PostgreSQL connection | (local) |
| `REDIS_URL` | Redis connection | (local) |
| `S3_ENDPOINT` | Object storage endpoint | (local MinIO) |

### LLM Configuration

HQ supports multiple LLM providers. Configure in the web interface or via environment:

| Provider | Environment Variable | Notes |
|----------|---------------------|-------|
| Anthropic | `ANTHROPIC_API_KEY` | Best tool support |
| OpenAI | `OPENAI_API_KEY` | GPT-4o and newer |
| Google | `GOOGLE_API_KEY` | Gemini models |
| Ollama | `OLLAMA_BASE_URL` | Local inference |

For complete privacy, run Ollama locally — no API keys needed, no data leaves your machine.

---

## Troubleshooting

### Common Issues

<Accordion title="Services won't start">
Check Docker resources. HQ needs ~32GB RAM for all services. Reduce by disabling optional services like Pelias (geocoding) if not needed.
</Accordion>

<Accordion title="Database connection errors">
Ensure PostgreSQL is fully started before the backend. The `docker compose up` command handles ordering, but on slow systems you may need to wait or restart.
</Accordion>

<Accordion title="Vector search not working">
PGVector extension must be enabled. The default Docker setup handles this automatically. For managed databases, ensure the extension is available.
</Accordion>

---

## Resources

<CardGroup cols={2}>
  <Card title="GitHub Repository" icon="github" href="https://github.com/open-politics/open-politics-hq">
    Source code and issues
  </Card>
  <Card title="Forum" icon="comments" href="https://forum.open-politics.org">
    Community support
  </Card>
</CardGroup>
