---
title: 'Technical Architecture'
description: 'How HQ and OPOL work under the hood'
---

Open Politics combines powerful data processing capabilities with intuitive user interfaces to democratise political intelligence. This page explains how our system is built and how the components work together.


{/* <Frame>
  <img src="/images/opp_high_level.png" alt="Open Politics High-Level Architecture" />
</Frame> */}

<Card horizontal="True" href="/pages/introduction">
  The following is a very technical section about our tools and methods. **If you are interested in the app (HQ) and what you can do with it as a user, please click here**
</Card>

## Overview

The platform consists of two primary components that operate together:

<CardGroup cols={2}>
  <Card title="HQ" icon="desktop" href="https://github.com/open-politics/open-politics-hq">
    Web application that visualises and provides analytical tools for the data
  </Card>
  
  <Card title="OPOL" icon="database" href="https://github.com/open-politics/opol">
    Data engine that ingests, processes, and enriches political content
  </Card>
</CardGroup>

This separation of concerns allows us to evolve each component independently whilst maintaining seamless integration between them.

## OPOL: The Data Engine

OPOL serves as the foundation of Open Politics, transforming diverse political data into structured, enriched information ready for analysis.

<Frame caption="OPOL Stack Architecture with Workflow Orchestration">
  <img src="/images/stackwithflowarchitecture.png" alt="OPOL Stack Architecture" />
</Frame>

### Key Capabilities

<CardGroup cols={3}>
  <Card title="Data Ingestion" icon="spider-web">
    Collection of data from diverse sources through configurable scrapers
  </Card>
  
  <Card title="Vector Processing" icon="vector-square">
    Conversion of text into numerical vectors for semantic analysis
  </Card>
  
  <Card title="Entity Recognition" icon="tag">
    Identification of people, organisations, locations, and other entities
  </Card>
  
  <Card title="Geocoding" icon="map-pin">
    Translation of location mentions into geographical coordinates
  </Card>
  
  <Card title="LLM Classification" icon="robot">
    Application of user-defined analytical frameworks using language models
  </Card>
  
  <Card title="Semantic Search" icon="magnifying-glass">
    Finding content based on meaning rather than just keywords
  </Card>
</CardGroup>

### Processing Pipeline

OPOL processes content through a series of interconnected microservices, each handling a specific aspect of the data enrichment pipeline:

<Steps>
  <Step title="Content Ingestion" icon="download">
    Scrapers collect articles, documents, and other content from configured sources
    
    <Info>
      Custom sources can be added by creating Python scripts that return data in the format:
      `URL | Headline | Paragraphs | Source`
    </Info>
  </Step>
  
  <Step title="Vectorisation" icon="calculator">
    Text content is converted into vector embeddings for semantic operations
    
    <Note>
      Vectors enable similarity search, clustering, and other advanced operations
    </Note>
  </Step>
  
  <Step title="Entity Extraction" icon="fingerprint">
    Named entities are identified and categorised using NLP techniques
    
    <img src="/images/entity_extraction.png" alt="Entity Extraction Process" />
  </Step>
  
  <Step title="Geocoding" icon="location-dot">
    Location entities are enriched with geographical coordinates
    
    <Note>
      This enables geospatial visualisation and analysis of political content
    </Note>
  </Step>
  
  <Step title="Classification" icon="tags">
    User-defined analytical frameworks are applied using LLMs
    
    <Info>
      Classifications can be customised for specific analytical needs
    </Info>
  </Step>
</Steps>

### Technical Implementation

<AccordionGroup>
  <Accordion title="Microservice Architecture">
    Each component of the data pipeline is implemented as an independent microservice:
    
    ```
    ├── service-scraper      # Content ingestion
    ├── service-embeddings    # Vector processing
    ├── service-geo           # Geocoding
    └── app-opol-core         # API and coordination
    ```
    
    This modularity allows for independent scaling and development of each component.
  </Accordion>
  
  <Accordion title="Workflow Orchestration">
    <Frame>
      <img src="/images/prefect_dashboard.png" alt="Prefect Dashboard" />
    </Frame>
    
    We use Prefect for workflow orchestration:
    
    - Batch processing of content through the pipeline
    - Monitoring and observability
    - Error handling and retries
    - Scheduling and triggering
    
    Prefect provides a dashboard to monitor flows and tasks across the system.
    If you boot the system locally you can check the Prefect dashboard at `localhost:4200`
  </Accordion>
  
  <Accordion title="Storage Layer">
    <CardGroup cols={2}>
      <Card title="PostgreSQL" icon="database">
        Primary storage for content and metadata
        
        - Content storage (full text, headlines, etc.)
        - Metadata (publication dates, sources)
        - Entity relationships
        - Classification results
      </Card>
      
      <Card title="PGVector" icon="layer-group">
        Vector storage for semantic operations
        
        - Document embeddings
        - Similarity search
        - Nearest neighbour queries
        - Semantic clustering
      </Card>
    </CardGroup>
    
    Additional storage components:
    - Redis for job queues and caching
    - File storage for document management
  </Accordion>
  
  <Accordion title="LLM Integration">
    We provide flexible options for language model integration:
    
    - OpenAI API for cloud-based processing
    - Google Vertex AI for alternative cloud options
    - Ollama for local LLM deployment
    
    <Info>
      Set `LOCAL_LLM=True` in your environment to use Ollama for local llm usage
    </Info>
  </Accordion>
</AccordionGroup>

## HQ: The User Interface

HQ is a modern web application that provides intuitive access to the processed data and analytical capabilities of OPOL.

### Key Components

<CardGroup cols={2}>
  <Card title="Globe Visualisation" icon="earth-americas">
    <Frame>
      <img src="/images/globe_interface.png" alt="Globe Interface" />
    </Frame>
    
    Interactive 3D representation of global political events
    
    - Event clustering and filtering
    - Location-based exploration
    - Temporal playback
    - Entity highlighting
  </Card>
  
  <Card title="Classification Runner" icon="code">
    <Frame>
      <img src="/images/classification_interface.png" alt="Classification Interface" />
    </Frame>
    
    Interface for defining and applying analytical frameworks
    
    - Schema definition
    - Document selection
    - Model configuration
    - Results visualisation
  </Card>
</CardGroup>

<CardGroup cols={2}>
  <Card title="Search Interface" icon="search">
    Unified search across multiple data types
    
    - Semantic search
    - Faceted filtering
    - Relevance scoring
    - Search history
  </Card>
  
  <Card title="Workspace System" icon="window-maximize">
    Customisable environments for different analytical needs
    
    - Layout customisation
    - Dashboard creation
    - Tool integration
    - Result sharing
  </Card>
</CardGroup>

### Technical Implementation

- **Framework**: NextJS-based web application
- **Frontend**: TypeScript with React components
- **Styling**: Tailwind CSS for responsive design
- **Visualisation**: Three.js for 3D globe and graph visualisations
- **UI Components**: ShadCN for accessible interface elements
- **Authentication**: Secure user authentication and authorisation

## Deployment Options

Open Politics supports multiple deployment scenarios to accommodate different needs:

<CardGroup cols={2}>
  <Card title="Self-Hosted" icon="server">
    Deploy the entire stack on your own infrastructure
    
    - Complete data sovereignty
    - Full customisation options
    - Higher resource requirements
    - Technical expertise needed
  </Card>
  
  <Card title="Hybrid" icon="cloud">
    Run HQ locally with a hosted OPOL backend
    
    - Reduced infrastructure requirements
    - Data processing handled externally
    - Simplified setup and maintenance
    - Balance of control and convenience
  </Card>
</CardGroup>

<CardGroup cols={2}>
  <Card title="Fully Hosted" icon="globe">
    Access through our public hosted instance
    
    - No local infrastructure needed
    - Immediate access to features
    - Regular updates
    - Community data sharing
  </Card>
  
  <Card title="Custom Deployment" icon="cogs">
    Tailored deployment for specific organisational needs
    
    - Optimised for particular use cases
    - Integration with existing systems
    - Specialised data sources
    - Custom security configurations
  </Card>
</CardGroup>

## System Requirements

For local deployments of the complete stack:

<CardGroup cols={3}>
  <Card title="RAM" icon="memory">
    32GB recommended
  </Card>
  
  <Card title="Storage" icon="hard-drive">
    20GB minimum
  </Card>
  
  <Card title="Processor" icon="microchip">
    4+ cores recommended
  </Card>
</CardGroup>

<Info>
  GPU is optional but can significantly improve performance for LLM operations and vector processing.
</Info>

## Next Steps

<CardGroup cols={2}>
  <Card title="Installation Guide" icon="download" href="/installation">
    Step-by-step instructions for setting up Open Politics
  </Card>
  
  <Card title="API Documentation" icon="code" href="/api">
    Reference for programmatic interaction with the platform
  </Card>
  
  <Card title="Configuration Options" icon="sliders" href="/configuration">
    Detailed configuration settings and customisation
  </Card>
  
  <Card title="Contributing Guide" icon="code-branch" href="/contributing">
    How to extend and improve the Open Politics platform
  </Card>
</CardGroup>